{"version":3,"sources":["webpack:///./core/modules/eventBus.js","webpack:///./core/modules/refs.js","webpack:///./core/router/actions.js","webpack:///./core/Behaviour.js","webpack:////Users/davidmaxwell-wood/Sites/_MUD/PQRST/SGFG/node_modules/scroll-out/lib/index.js","webpack:///./behaviours/Backgrounds.js"],"names":["mitt__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","eventBus","Object","__webpack_exports__","sanitizeName","name","replace","$0","$1","toUpperCase","removeValueLess","ramda_src_filter__WEBPACK_IMPORTED_MODULE_11___default","_ref","value","getDataAttributes","attr","test","cleanName","ramda_src_map__WEBPACK_IMPORTED_MODULE_10___default","_ref2","substr","flattenToObject","ramda_src_reduce__WEBPACK_IMPORTED_MODULE_9___default","acc","_ref3","key","composeProps","ramda_src_compose__WEBPACK_IMPORTED_MODULE_8___default","node","concat","getAttribute","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7___default","attributes","gatherProps","d","ROUTER_POP_EVENT","ROUTER_PAGE_NOT_FOUND","ROUTE_TRANSITION_LOAD","ROUTE_TRANSITION_EXIT","ROUTE_TRANSITION_RESOLVED","ROUTE_TRANSITION_BEFORE_DOM_UPDATE","ROUTE_TRANSITION_AFTER_DOM_UPDATE","ROUTE_TRANSITION_ENTER","ROUTE_TRANSITION_COMPLETE","MixinBuilder","superclass","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default","this","_len","arguments","length","mixins","Array","_key","reduce","c","mixin","mix","$html","document","getElementsByTagName","$body","body","KEY_CODES","DELETE_KEY","SHIFT_KEY","CTRL_KEY","ALT_KEY","RETURN_KEY","ESC_KEY","SPACE_KEY","LEFT_KEY","UP_KEY","RIGHT_KEY","DOWN_KEY","A_KEY","S_KEY","CMD_KEY","Behaviour","el","undefined","$name","$el","$$eventBus","_core_modules_eventBus__WEBPACK_IMPORTED_MODULE_4__","$data","_core_modules_refs__WEBPACK_IMPORTED_MODULE_3__","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_2___default","routes","enter","on","_core_router_actions__WEBPACK_IMPORTED_MODULE_5__","exit","unmount","off","noop","clearTask","actions","subscribers","loop","slice","forEach","s2","next","q","f","apply","a","requestAnimationFrame","enqueue","fn","clamp","v","min","max","sign","x","round","n","Math","cache","hyphenate","replacer","match","toLowerCase","win","window","root","documentElement","$","e","parent","nodeName","call","querySelectorAll","setAttrs","attrs","setAttribute","setProps","cssProps","props","style","setProperty","SCROLL","RESIZE","ON","OFF","lastId","module","exports","opts","rootCtx","elements","shouldIndex","cx","cy","onChange","onHidden","onShown","se","scrollingElement","container","doc","id","changeAndDetect","obj","JSON","stringify","index","update","cw","clientWidth","ch","clientHeight","dirX","scrollLeft","pageXOffset","dirY","scrollTop","pageYOffset","scrollPercentX","scrollWidth","scrollPercentY","scrollHeight","scrollDirX","scrollDirY","targets","scope","map","ctx","target","y","offsetLeft","offsetTop","offsetParent","w","h","visibleX","visibleY","viewportX","viewportY","elementHeight","elementWidth","intersectX","intersectY","offsetX","offsetY","visible","offset","threshold","sub","push","filter","s","cancelAnimationFrame","subscribe","scroll","once","splice","teardown","plugins","gsap_all__WEBPACK_IMPORTED_MODULE_10__","log","Backgrounds","$backgroundEl","getElementById","rightBgArray","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_1___default","_this","soBackground","scroll_out__WEBPACK_IMPORTED_MODULE_9___default","element","gsap_all__WEBPACK_IMPORTED_MODULE_11__","to","backgroundColor","dataset","bgColour","ease","easeOut","$bgElement","soReveals","_core_Behaviour__WEBPACK_IMPORTED_MODULE_8__"],"mappings":"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","file":"behaviour-Backgrounds.bundle.1544006707924.js","sourcesContent":["import mitt from 'mitt'\n\nconst eventBus = mitt()\n\nexport default eventBus\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\n\n// Does this need any comments?\n\nconst sanitizeName = name => name.replace(/-(.)/g, ($0, $1) => $1.toUpperCase())\n\nconst removeValueLess = R.filter(({ value }) => value)\n\nconst getDataAttributes = R.filter(\n\tattr =>\n\t\t/^data-/.test(attr.name) &&\n\t\tattr.name !== 'data-element' &&\n\t\tattr.name !== 'data-behaviour'\n)\n\nconst cleanName = R.map(({ name, value }) => ({\n\tname: sanitizeName(name.substr(5)),\n\tvalue\n}))\n\nconst flattenToObject = R.reduce((acc, { name: key, value }) => {\n\tacc[key] = value\n\treturn acc\n}, {})\n\nexport const composeProps = R.compose(\n\tflattenToObject,\n\tcleanName,\n\tremoveValueLess,\n\tgetDataAttributes\n)\n\nconst gatherProps = node => composeProps([...node.attributes])\n\nconst createRefs = R.reduce((acc, node) => {\n\tacc[`${sanitizeName(node.getAttribute('data-element'))}`] = {\n\t\tnode,\n\t\t...gatherProps(node)\n\t}\n\n\treturn acc\n}, {})\n\nexport default root => createRefs([...root.querySelectorAll('*[data-element]')])\n\n/**\n * Create a router\n * @memberof Behaviour\n * @mixin RefsMixin\n * @example\n * import ScreenMixin, { mix } from '@/core/ScreenMixin'\n * import {\n * \tRefsMixin,\n * } from '@/core/modules/'\n *\n * export default class ExampleWithAllTheThings extends mix(Behaviour).with(\n * \tRefsMixin\n * ) {\n * \tmount = () => {\n * \t\tthis.$$refs.someElement.node.classList.add('hello')\n * \t}\n * }\n * @return {RefsMixin}\n */\nexport const RefsMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$$refs = createRefs([\n\t\t\t\t...this.$el.querySelectorAll('*[data-element]')\n\t\t\t])\n\t\t\tif (super.init) super.init()\n\t\t}\n\t}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","/*\n\tNames for the events emiitted through the route class\n\n\tThe names should be pretty self explanatory \n*/\n\nexport const ROUTER_POP_EVENT = 'ROUTER_POP_EVENT'\n\nexport const ROUTER_PAGE_NOT_FOUND = 'ROUTER_PAGE_NOT_FOUND'\n\nexport const ROUTE_LINK_CLICKED = 'ROUTE_LINK_CLICKED'\n\nexport const ROUTE_TRANSITION_LOAD = 'ROUTE_TRANSITION_LOAD'\n\nexport const ROUTE_TRANSITION_EXIT = 'ROUTE_TRANSITION_EXIT'\n\nexport const ROUTE_TRANSITION_RESOLVED = 'ROUTE_TRANSITION_RESOLVED'\n\nexport const ROUTE_TRANSITION_BEFORE_DOM_UPDATE =\n\t'ROUTE_TRANSITION_BEFORE_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_AFTER_DOM_UPDATE =\n\t'ROUTE_TRANSITION_AFTER_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_ENTER = 'ROUTE_TRANSITION_ENTER'\n\nexport const ROUTE_TRANSITION_COMPLETE = 'ROUTE_TRANSITION_COMPLETE'\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import { composeProps } from '@/core/modules/refs'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Actions from '@/core/router/actions'\n\n/**\n * @namespace dom\n */\n\nclass MixinBuilder {\n\tconstructor(superclass) {\n\t\tthis.superclass = superclass\n\t}\n\n\twith(...mixins) {\n\t\treturn mixins.reduce((c, mixin) => mixin(c), this.superclass)\n\t}\n}\n\nexport const mix = superclass => new MixinBuilder(superclass)\n\n/**\n *\n * @namespace Behavior\n * @description Behavior class to handle adding/removing functionality from the dom.\n * Use the mixins to add enhancements\n *\n * @class Behavior\n *\n * @param {HTMLElement} el - the html element to bind the behaviour too\n * @param {String} name - a name to give the behaviour\n *\n * @property {String} Behaviour.$name -  The name given to the behaviour\n * @property {HTMLElement} Behaviour.$el -  The element the behaviour is attached to\n * @property {HTMLElement} Behaviour.$body -  the body element\n * @property {HTMLElement} Behaviour.$html -  the html element\n * @property {Object} Behaviour.$data - any data attributes on the $el\n * @property {Function} Behaviour.$$$eventBus.on -  global event emitter, listen to events\n * @property {Function} Behaviour.$$$eventBus.off -  global event emitter, remove to events\n * @property {Function} Behaviour.$$$eventBus.emit -  global event emitter, emit event\n * @property {Object} Behavior.KEY_CODES\n * @property {Number} Behaviour.KEY_CODS.DELETE_KEY -  delete\n * @property {Number} Behaviour.KEY_CODS.SHIFT_KEY - shift\n * @property {Number} Behaviour.KEY_CODS.CTRL_KEY - control\n * @property {Number} Behaviour.KEY_CODS.ALT_KEY -  alt\n * @property {Number} Behaviour.KEY_CODS.RETURN_KEY - return\n * @property {Number} Behaviour.KEY_CODS.ESC_KEY - escape\n * @property {Number} Behaviour.KEY_CODS.SPACE_KEY - space\n * @property {Number} Behaviour.KEY_CODS.LEFT_KEY - left\n * @property {Number} Behaviour.KEY_CODS.UP_KEY - up\n * @property {Number} Behaviour.KEY_CODS.RIGHT_KEY - right\n * @property {Number} Behaviour.KEY_CODS.DOWN_KEY - down\n * @property {Number} Behaviour.KEY_CODS.CMD_KEY - command\n * @example\n * import Behaviour from '@/core/Behaviour'\n *\n * export default class ExampleWithAllTheThings Behaviour {\n * \tmount = () => {\n * \t\t// this.$el === the node with the data-behaviour\n * \t\tthis.$el.classList.add('mount')\n * \t\t// this.$body === <body></body>\n * \t\t// this.$html === <html></html>\n * \t\t// this.KEY_CODES === common key codes\n * \t\t// this.$data === any data attributes on this.$el\n * \t}\n *\n * \tunmount = () => {}\n * }\n *\n * @return {Behavior}\n */\nexport default (() => {\n\tconst $html = document.getElementsByTagName('html')[0]\n\tconst $body = document.body\n\tconst KEY_CODES = {\n\t\tDELETE_KEY: 8,\n\t\tSHIFT_KEY: 16,\n\t\tCTRL_KEY: 17,\n\t\tALT_KEY: 18,\n\t\tRETURN_KEY: 13,\n\t\tESC_KEY: 27,\n\t\tSPACE_KEY: 32,\n\t\tLEFT_KEY: 37,\n\t\tUP_KEY: 38,\n\t\tRIGHT_KEY: 39,\n\t\tDOWN_KEY: 40,\n\t\tA_KEY: 65,\n\t\tS_KEY: 83,\n\t\tCMD_KEY: 91\n\t}\n\n\treturn class Behaviour {\n\t\tconstructor(el = document, name = '') {\n\t\t\tthis.$name = name\n\t\t\tthis.$el = el\n\t\t\tthis.$body = $body\n\t\t\tthis.$html = $html\n\n\t\t\tthis.$$eventBus = eventBus\n\n\t\t\tthis.KEY_CODES = KEY_CODES\n\n\t\t\tthis.$data = this.$el.attributes\n\t\t\t\t? composeProps([...this.$el.attributes])\n\t\t\t\t: null // here lies a bug\n\t\t}\n\n\t\t/**\n\t\t * Create a router\n\t\t * @memberof Behavior\n\t\t *\n\t\t * @method init\n\t\t * @description initialise the router events\n\t\t * @return {void}\n\t\t */\n\t\tinit() {\n\t\t\tif (this.routes) {\n\t\t\t\tif (this.routes.enter)\n\t\t\t\t\tthis.$$eventBus.on(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\n\t\t\t\tif (this.routes.exit)\n\t\t\t\t\tthis.$$eventBus.on(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Create a router\n\t\t * @memberof Behavior\n\t\t *\n\t\t * @method mount\n\t\t * @description called after instantiation\n\t\t * @return {void}\n\t\t */\n\t\tmount() {} // eslint-disable-line class-methods-use-this\n\n\t\t/**\n\t\t * Create a router\n\t\t * @memberof Behavior\n\t\t *\n\t\t * @method unmount\n\t\t * @description called when destroying\n\t\t * @return {void}\n\t\t */\n\t\tunmount() {} // eslint-disable-line class-methods-use-this\n\n\t\t/**\n\t\t * Create a router\n\t\t * @memberof Behavior\n\t\t *\n\t\t * @method destroy\n\t\t * @description kill the current behaviour\n\t\t * @return {void}\n\t\t */\n\t\tdestroy() {\n\t\t\tthis.unmount()\n\n\t\t\tif (this.routes) {\n\t\t\t\tif (this.routes.enter)\n\t\t\t\t\tthis.$$eventBus.off(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\n\t\t\t\tif (this.routes.exit)\n\t\t\t\t\tthis.$$eventBus.off(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t\t}\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","'use strict';\n\nfunction noop() { }\n\nvar clearTask;\r\nvar actions = [];\r\nvar subscribers = [];\r\nfunction subscribe(fn) {\r\n    subscribers.push(fn);\r\n    clearTask || loop();\r\n    return function () {\r\n        subscribers = subscribers.filter(function (s) { return s != fn; });\r\n        if (!subscribers.length && clearTask) {\r\n            clearTask = 0;\r\n            cancelAnimationFrame(clearTask);\r\n        }\r\n    };\r\n}\r\nfunction loop() {\r\n    // process subscribers\r\n    var s = subscribers.slice();\r\n    s.forEach(function (s2) { return s2(); });\r\n    // process actions collected\r\n    var next = actions;\r\n    actions = [];\r\n    next.forEach(function (q) { return q.f.apply(0, q.a); });\r\n    // schedule next loop if the queue needs it\r\n    clearTask = subscribers.length ? requestAnimationFrame(loop) : 0;\r\n}\r\nfunction enqueue(fn) {\r\n    fn = fn || noop;\r\n    return function () {\r\n        fn.apply(0, arguments);\r\n    };\r\n}\n\nfunction clamp(v, min, max) {\r\n    return min > v ? min : max < v ? max : v;\r\n}\r\nfunction sign(x) {\r\n    return (x > 0) - (x < 0);\r\n}\r\nfunction round(n) {\r\n    return Math.round(n * 10000) / 10000;\r\n}\n\nvar cache = {};\r\nfunction hyphenate(value) {\r\n    return cache[value] || (cache[value] = value.replace(/([A-Z])/g, replacer));\r\n}\r\nfunction replacer(match) {\r\n    return \"-\" + match[0].toLowerCase();\r\n}\n\nvar win = window;\r\nvar root = document.documentElement;\r\n/** find elements */\r\nfunction $(e, parent) {\r\n    return !e || e.length == 0\r\n        ? // null or empty string returns empty array\r\n            []\r\n        : e.nodeName\r\n            ? // a single element is wrapped in an array\r\n                [e]\r\n            : // selector and NodeList are converted to Element[]\r\n                [].slice.call(e[0].nodeName ? e : (parent || root).querySelectorAll(e));\r\n}\r\nvar setAttrs = enqueue(function (el, attrs) {\r\n    for (var key in attrs) {\r\n        el.setAttribute(\"data-\" + hyphenate(key), attrs[key]);\r\n    }\r\n});\r\nvar setProps = function (cssProps) {\r\n    return enqueue(function (el, props) {\r\n        for (var key in props) {\r\n            if (cssProps == true || cssProps[key]) {\r\n                el.style.setProperty(\"--\" + hyphenate(key), round(props[key]));\r\n            }\r\n        }\r\n    });\r\n};\n\nvar SCROLL = 'scroll';\r\nvar RESIZE = 'resize';\r\nvar ON = 'addEventListener';\r\nvar OFF = 'removeEventListener';\r\nvar lastId = 0;\r\n/**\r\n * Creates a new instance of ScrollOut that marks elements in the viewport with an \"in\" class\r\n * and marks elements outside of the viewport with an \"out\"\r\n */\r\nfunction main (opts) {\r\n    // set default options\r\n    opts = opts || {};\r\n    var onChange = enqueue(opts.onChange);\r\n    var onHidden = enqueue(opts.onHidden);\r\n    var onShown = enqueue(opts.onShown);\r\n    var props = opts.cssProps ? setProps(opts.cssProps) : noop;\r\n    var se = opts.scrollingElement;\r\n    var container = se ? $(se)[0] : win;\r\n    var doc = se ? $(se)[0] : root;\r\n    var id = ++lastId;\r\n    var changeAndDetect = function (obj, key, value) {\r\n        return obj[key + id] != (obj[key + id] = JSON.stringify(value));\r\n    };\r\n    var rootCtx;\r\n    var elements;\r\n    var shouldIndex;\r\n    var index = function () {\r\n        shouldIndex = true;\r\n    };\r\n    var cx, cy;\r\n    var update = function () {\r\n        // calculate position, direction and ratio\r\n        var cw = doc.clientWidth;\r\n        var ch = doc.clientHeight;\r\n        var dirX = sign(-cx + (cx = doc.scrollLeft || win.pageXOffset));\r\n        var dirY = sign(-cy + (cy = doc.scrollTop || win.pageYOffset));\r\n        var scrollPercentX = doc.scrollLeft / (doc.scrollWidth - cw || 1);\r\n        var scrollPercentY = doc.scrollTop / (doc.scrollHeight - ch || 1);\r\n        // call update to dom\r\n        rootCtx = {\r\n            scrollDirX: dirX,\r\n            scrollDirY: dirY,\r\n            scrollPercentX: scrollPercentX,\r\n            scrollPercentY: scrollPercentY\r\n        };\r\n        if (shouldIndex) {\r\n            shouldIndex = false;\r\n            elements = $(opts.targets || '[data-scroll]', $(opts.scope || doc)[0]).map(function (el) {\r\n                return {\r\n                    $: el,\r\n                    ctx: {}\r\n                };\r\n            });\r\n        }\r\n        elements.forEach(function (obj) {\r\n            var el = obj.$;\r\n            // find the distance from the element to the scrolling container\r\n            var target = el;\r\n            var x = 0;\r\n            var y = 0;\r\n            do {\r\n                x += target.offsetLeft;\r\n                y += target.offsetTop;\r\n                target = target.offsetParent;\r\n            } while (target && target != container);\r\n            // get element dimensions\r\n            var w = el.clientWidth;\r\n            var h = el.clientHeight;\r\n            // find visible ratios for each element\r\n            var visibleX = (clamp(x + w, cx, cx + cw) - clamp(x, cx, cx + cw)) / w;\r\n            var visibleY = (clamp(y + h, cy, cy + ch) - clamp(y, cy, cy + ch)) / h;\r\n            var viewportX = clamp((cx - (w / 2 + x - cw / 2)) / (cw / 2), -1, 1);\r\n            var viewportY = clamp((cy - (h / 2 + y - ch / 2)) / (ch / 2), -1, 1);\r\n            obj.ctx = {\r\n                elementHeight: h,\r\n                elementWidth: w,\r\n                intersectX: visibleX == 1 ? 0 : sign(x - cx),\r\n                intersectY: visibleY == 1 ? 0 : sign(y - cy),\r\n                offsetX: x,\r\n                offsetY: y,\r\n                viewportX: viewportX,\r\n                viewportY: viewportY,\r\n                visibleX: visibleX,\r\n                visibleY: visibleY,\r\n                visible: +(opts.offset ? opts.offset <= cy : (opts.threshold || 0) < visibleX * visibleY)\r\n            };\r\n        });\r\n    };\r\n    var render = function () {\r\n        if (!elements) {\r\n            return;\r\n        }\r\n        if (changeAndDetect(doc, '_S', rootCtx)) {\r\n            setAttrs(doc, {\r\n                scrollDirX: rootCtx.scrollDirX,\r\n                scrollDirY: rootCtx.scrollDirY\r\n            });\r\n            props(doc, rootCtx);\r\n        }\r\n        var len = elements.length;\r\n        for (var x = len - 1; x > -1; x--) {\r\n            var obj = elements[x];\r\n            var el = obj.$;\r\n            var ctx = obj.ctx;\r\n            var visible = ctx.visible;\r\n            if (changeAndDetect(el, '_SO', ctx)) {\r\n                // if percentage visibility has changed, update\r\n                props(el, ctx);\r\n            }\r\n            // handle callbacks\r\n            if (changeAndDetect(el, '_SV', visible)) {\r\n                setAttrs(el, {\r\n                    scroll: visible ? 'in' : 'out'\r\n                });\r\n                onChange(el, ctx, doc);\r\n                (visible ? onShown : onHidden)(el, ctx, doc);\r\n            }\r\n            // if this is shown multiple times, keep it in the list\r\n            if (visible && opts.once) {\r\n                elements.splice(x, 1);\r\n            }\r\n        }\r\n    };\r\n    var sub = subscribe(render);\r\n    // run initialize index\r\n    index();\r\n    update();\r\n    // hook up document listeners to automatically detect changes\r\n    win[ON](RESIZE, index);\r\n    container[ON](SCROLL, update);\r\n    return {\r\n        index: index,\r\n        update: update,\r\n        teardown: function () {\r\n            sub();\r\n            win[OFF](RESIZE, index);\r\n            container[OFF](SCROLL, update);\r\n        }\r\n    };\r\n}\n\nmodule.exports = main;\n","import Behaviour from '@/core/Behaviour'\nimport ScrollOut from 'scroll-out'\nimport { TweenLite, Power3, CSSPlugin } from 'gsap/all'\n\nconst plugins = [CSSPlugin]\nlog(plugins)\n\nexport default class Backgrounds extends Behaviour {\n\tmount = () => {\n\t\tconst $backgroundEl = document.getElementById('background')\n\t\tconst rightBgArray = [...document.querySelectorAll('.c-service__bg')]\n\t\tthis.soBackground = ScrollOut({\n\t\t\tscope: this.$el,\n\t\t\tthreshold: 0.5,\n\t\t\ttargets: '[data-background]',\n\t\t\tonShown: element => {\n\t\t\t\t/* Triggered when an element is shown */\n\t\t\t\tTweenLite.to($backgroundEl, 1, {\n\t\t\t\t\tbackgroundColor: element.dataset.bgColour,\n\t\t\t\t\tease: Power3.easeOut\n\t\t\t\t})\n\n\t\t\t\trightBgArray.forEach($bgElement => {\n\t\t\t\t\tTweenLite.to($bgElement, 1, {\n\t\t\t\t\t\tbackgroundColor: element.dataset.bgColour,\n\t\t\t\t\t\tease: Power3.easeOut\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\n\t\tthis.soReveals = ScrollOut({\n\t\t\tscope: this.$el,\n\t\t\tthreshold: 0.3,\n\t\t\ttargets: '[data-scroll]',\n\t\t\tonce: true\n\t\t})\n\t}\n\n\tunmount = () => {\n\t\tif (this.soBackground) this.soBackground.teardown()\n\t\tif (this.soReveals) this.soReveals.teardown()\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n"],"sourceRoot":""}