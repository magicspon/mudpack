{"version":3,"sources":["webpack:///./core/modules/eventBus.js","webpack:///./core/modules/refs.js","webpack:///./core/router/actions.js","webpack:///./core/modules/createEvents.js","webpack:///./core/modules/inview.js","webpack:///./ui lazy ^\\.\\/.*$ namespace object","webpack:///./core/router/fetch.worker.js","webpack:///./core/modules/loader.js","webpack:///./core/UiLoader.js","webpack:///./core/utils/strings.js","webpack:///./core/router/utils/parseUrl.js","webpack:///./core/router/utils/links.js","webpack:///./core/router/history.js","webpack:///./core/router/cache.js","webpack:///./core/router/request.js","webpack:///./core/router/lazyload.js","webpack:///./core/router/utils/paths.js","webpack:///./core/router/utils/dom.js","webpack:///./core/router/transition.js","webpack:///./core/router/lifecycle.js","webpack:///./core/router/index.js","webpack:///./core/App.js"],"names":["mitt__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","eventBus","Object","__webpack_exports__","sanitizeName","name","replace","$0","$1","toUpperCase","removeValueLess","ramda_src_filter__WEBPACK_IMPORTED_MODULE_11___default","_ref","value","getDataAttributes","attr","test","cleanName","ramda_src_map__WEBPACK_IMPORTED_MODULE_10___default","_ref2","substr","flattenToObject","ramda_src_reduce__WEBPACK_IMPORTED_MODULE_9___default","acc","_ref3","key","composeProps","ramda_src_compose__WEBPACK_IMPORTED_MODULE_8___default","node","concat","getAttribute","_babel_runtime_helpers_objectSpread__WEBPACK_IMPORTED_MODULE_6___default","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_7___default","attributes","gatherProps","d","ROUTER_POP_EVENT","ROUTER_PAGE_NOT_FOUND","ROUTE_TRANSITION_LOAD","ROUTE_TRANSITION_EXIT","ROUTE_TRANSITION_RESOLVED","ROUTE_TRANSITION_BEFORE_DOM_UPDATE","ROUTE_TRANSITION_AFTER_DOM_UPDATE","ROUTE_TRANSITION_ENTER","ROUTE_TRANSITION_COMPLETE","createEvents","ramda_src_curry__WEBPACK_IMPORTED_MODULE_20___default","context","obj","$delegate","emit","_this","this","events","entries","map","_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_16___default","fn","eventAndNode","ramda_src_compose__WEBPACK_IMPORTED_MODULE_15___default","ramda_src_map__WEBPACK_IMPORTED_MODULE_14___default","ramda_src_trim__WEBPACK_IMPORTED_MODULE_13___default","a","ramda_src_split__WEBPACK_IMPORTED_MODULE_12___default","capture","ramda_src_length__WEBPACK_IMPORTED_MODULE_11___default","ramda_src_match__WEBPACK_IMPORTED_MODULE_10___default","ramda_src_head__WEBPACK_IMPORTED_MODULE_9___default","funk","_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_8___default","handleFunctions","evt","transform","fns","ramda_src_forEach__WEBPACK_IMPORTED_MODULE_7___default","event","_$delegate","apply","item","ramda_src_find__WEBPACK_IMPORTED_MODULE_6___default","_ref4","b","join","attachAll","root","arguments","length","undefined","dom_delegate__WEBPACK_IMPORTED_MODULE_21___default","_$delegate2","on","err","console","error","attach","remove","destroy","_$delegate3","off","$node","document","createEvent","initEvent","dispatchEvent","EventsMixin","superclass","_superclass","_class","_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default","_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2___default","_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3___default","_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_5___default","_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default","$$events","call","$el","_babel_runtime_helpers_get__WEBPACK_IMPORTED_MODULE_4___default","prototype","inview","base","observer","defaultOptions","rootMargin","threshold","isActive","onIntersection","forEach","type","isIntersecting","unobserve","target","window","IntersectionObserver","disconnect","watch","selector","_ref$options","options","nodes","querySelectorAll","ramda_src_forEach__WEBPACK_IMPORTED_MODULE_6___default","observe","./Accordion","./Accordion.js","./Carousel","./Carousel.js","./Draw","./Draw.js","./Dropdown","./Dropdown.js","./ScrollTo","./ScrollTo.js","./Slide","./Slide.js","./Validation","./Validation.js","./VideoPlayer","./VideoPlayer.js","webpackAsyncContext","req","ids","Promise","all","slice","e","then","id","resolve","Error","code","keys","module","exports","Worker","p","loader_gather","compose_default","map_default","behaviour","resp","default","flatten_default","split_default","replace_default","UiLoader","cache","Map","scan","asyncToGenerator_default","regenerator_default","mark","_callee","query","Ui","settings","_module","wrap","_context","prev","next","hasLoaded","matchMedia","matches","unmount","set","objectSpread_default","get","abrupt","sent","JSON","parse","mount","setTimeout","stop","_x","handle","rafThrottle_default","addEventListener","hydrate","forEach_default","_node$dataset","dataset","uiOptions","toConsumableArray_default","closest","delete","removeSpecialCharacters","trim_default","segmentize","memoizeWith_default","identity_default","str","join_default","over_default","lensIndex_default","toUpper_default","match","ch","toLower_default","filter_default","beautifyPath","leadingSlashPath","slugFromPath","last_default","parseUri","o","m","parser","strictMode","exec","uri","i","q","$2","decodeParam","param","decodeURIComponent","_","strict","loose","matchRoute","path","re","path_to_regexp_default","pathname","params","output","repeat","split","delimiter","createPathObject","sensitive","end","parseUrl_parseUrl","href","_parseUri","hash","anchor","host","queryKey","source","isRoot","raw","segments","slug","links_localLinks","scope","filter","local_links_default","isLocal","location","setAttribute","preventClick","element","which","metaKey","ctrlKey","shiftKey","altKey","protocol","hostname","indexOf","hasAttribute","activeLinks","previous","$anchors","defaultClasses","parent","classes","classNames","url","_parseUrl","testSegments","className","classList","add","reduce_default","slicedToArray_default","push","_ref6","matchAgainst","length_default","take_default","groupBy_default","_ref7","head_default","router_history","history","createBrowserHistory_default","store","listen","action","state","log","actions","router_cache","has","Queue","Set","request","headers","X-SPONJS-ROUTE","fromCache","timer","data","status","fetch","response","clearTimeout","ok","lazyload","worker","fetch_worker_default","errorLinks","getLinks","reject_default","contains_default","uniqBy_default","prop_default","viewport","enter","link","postMessage","validLinks","origin","cancel","flattenRoutes","curr","tmpPath","children","rest","objectWithoutProperties_default","tmp","items","Array","isArray","mapChildren","container","pattern","paths_findRoute","routes","routeMap","_R$find","find_default","propEq_default","route","reverse_default","sortBy_default","last","slugLength","pathLength","score","pageNo","parseInt","match_default","paths_matches","_R$find2","setTransitionAttributes","$body","body","lifecycle","from","to","toggleCustomBodyProp","prop","removeAttribute","router_transition","el","onLoad","props","shouldUnmount","shouldMount","onError","updateDom","wrapper","newHtml","title","innerHTML","appendChild","onExit","onAfterExit","onEnter","onAfterEnter","lifecycle_Lifecycle","Lifecycle","rootNode","classCallCheck_default","defineProperty_default","view","trans","dataAttrs","newState","exitProps","_ref5","markup","html","enterProps","transition","exitTransition","assign","enterTransition","oldHtml","querySelector","domify_default","textContent","trim","customBodyProp","_callee2","_context2","reject","_x2","_callee3","_context3","_x3","core_router","defaultRoutes","Router","_ref$routes","navLinks","_ref$prefetchTargets","prefetchTargets","_ref$progressOptions","progressOptions","showSpinner","elm","size","catch","warn","preventDefault","refs","goTo","init","$links","$events","$wrapper","click a","mouseover a","nprogress_default","configure","createClass_default","_goTo","start","done","t0","App","router","chunks","$loader","$router","requestIdleCallback","stack","gatherBehaviours","Behaviour","loader"],"mappings":"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","file":"chunk-app.bundle.1544006707924.js","sourcesContent":["import mitt from 'mitt'\n\nconst eventBus = mitt()\n\nexport default eventBus\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\n\n// Does this need any comments?\n\nconst sanitizeName = name => name.replace(/-(.)/g, ($0, $1) => $1.toUpperCase())\n\nconst removeValueLess = R.filter(({ value }) => value)\n\nconst getDataAttributes = R.filter(\n\tattr =>\n\t\t/^data-/.test(attr.name) &&\n\t\tattr.name !== 'data-element' &&\n\t\tattr.name !== 'data-behaviour'\n)\n\nconst cleanName = R.map(({ name, value }) => ({\n\tname: sanitizeName(name.substr(5)),\n\tvalue\n}))\n\nconst flattenToObject = R.reduce((acc, { name: key, value }) => {\n\tacc[key] = value\n\treturn acc\n}, {})\n\nexport const composeProps = R.compose(\n\tflattenToObject,\n\tcleanName,\n\tremoveValueLess,\n\tgetDataAttributes\n)\n\nconst gatherProps = node => composeProps([...node.attributes])\n\nconst createRefs = R.reduce((acc, node) => {\n\tacc[`${sanitizeName(node.getAttribute('data-element'))}`] = {\n\t\tnode,\n\t\t...gatherProps(node)\n\t}\n\n\treturn acc\n}, {})\n\nexport default root => createRefs([...root.querySelectorAll('*[data-element]')])\n\n/**\n * Create a router\n * @memberof Behaviour\n * @mixin RefsMixin\n * @example\n * import ScreenMixin, { mix } from '@/core/ScreenMixin'\n * import {\n * \tRefsMixin,\n * } from '@/core/modules/'\n *\n * export default class ExampleWithAllTheThings extends mix(Behaviour).with(\n * \tRefsMixin\n * ) {\n * \tmount = () => {\n * \t\tthis.$$refs.someElement.node.classList.add('hello')\n * \t}\n * }\n * @return {RefsMixin}\n */\nexport const RefsMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$$refs = createRefs([\n\t\t\t\t...this.$el.querySelectorAll('*[data-element]')\n\t\t\t])\n\t\t\tif (super.init) super.init()\n\t\t}\n\t}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","/*\n\tNames for the events emiitted through the route class\n\n\tThe names should be pretty self explanatory \n*/\n\nexport const ROUTER_POP_EVENT = 'ROUTER_POP_EVENT'\n\nexport const ROUTER_PAGE_NOT_FOUND = 'ROUTER_PAGE_NOT_FOUND'\n\nexport const ROUTE_LINK_CLICKED = 'ROUTE_LINK_CLICKED'\n\nexport const ROUTE_TRANSITION_LOAD = 'ROUTE_TRANSITION_LOAD'\n\nexport const ROUTE_TRANSITION_EXIT = 'ROUTE_TRANSITION_EXIT'\n\nexport const ROUTE_TRANSITION_RESOLVED = 'ROUTE_TRANSITION_RESOLVED'\n\nexport const ROUTE_TRANSITION_BEFORE_DOM_UPDATE =\n\t'ROUTE_TRANSITION_BEFORE_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_AFTER_DOM_UPDATE =\n\t'ROUTE_TRANSITION_AFTER_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_ENTER = 'ROUTE_TRANSITION_ENTER'\n\nexport const ROUTE_TRANSITION_COMPLETE = 'ROUTE_TRANSITION_COMPLETE'\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import Delegate from 'dom-delegate'\nimport * as R from 'ramda'\n\n/**\n * @namespace createEvents\n */\n\n// do not use an array function... we need to be able to bind\nexport const createEvents = R.curry(function(context, obj) {\n\tconst events = Object.entries(obj).map(([key, fn]) => {\n\t\tconst eventAndNode = R.compose(R.map(R.trim), R.split(' '))(key)\n\t\tconst capture = !!R.compose(R.length, R.match(/(blur|mouse)/g), R.head)(\n\t\t\teventAndNode\n\t\t)\n\t\tconst funk = typeof fn === 'string' ? this[fn] : fn\n\t\treturn [...eventAndNode, funk, capture]\n\t})\n\n\tlet $delegate\n\tlet emit\n\n\tconst handleFunctions = R.curry((evt, transform, fns) => {\n\t\tR.compose(\n\t\t\tR.forEach(event => {\n\t\t\t\t$delegate[transform](...event)\n\t\t\t}),\n\t\t\tR.map(item =>\n\t\t\t\tR.find(([a, b]) => {\n\t\t\t\t\t// alls add/remove of events without a selector - things like keydown/keyup\n\t\t\t\t\tif (typeof b === 'function') {\n\t\t\t\t\t\treturn a === item\n\t\t\t\t\t}\n\t\t\t\t\treturn [a, b].join(' ') === item\n\t\t\t\t})(evt)\n\t\t\t)\n\t\t)(fns)\n\t})(events)\n\n\treturn {\n\t\t/**\n\t\t * @memberof createEvents\n\t\t * @function attachAll\n\t\t * @param {HTMLElement} root - the element to delegate to\n\t\t */\n\t\tattachAll(root = context) {\n\t\t\t$delegate = $delegate || new Delegate(root)\n\t\t\ttry {\n\t\t\t\tR.forEach(event => $delegate.on(...event))(events)\n\t\t\t} catch (err) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Handler must be a type of Function, careful with arrow functions, they will need to be above the events object:',\n\t\t\t\t\terr\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * @memberof createEvents\n\t\t * @function attach\n\t\t * @param {Array} fns - an array of cuntions\n\t\t * @param {HTMLElement} root - the element to delegate to\n\t\t * @return {void}\n\t\t */\n\t\tattach(fns, root = context) {\n\t\t\t$delegate = $delegate || new Delegate(root)\n\t\t\thandleFunctions('on', fns)\n\t\t},\n\n\t\t/**\n\t\t * @memberof createEvents\n\t\t * @function remove\n\t\t * @param {Array} fns - an array of cuntions\n\t\t * @return {void}\n\t\t */\n\t\tremove(fns) {\n\t\t\tif (!$delegate) return\n\t\t\thandleFunctions('off', fns)\n\t\t},\n\n\t\t/**\n\t\t * @memberof createEvents\n\t\t * @function destroy\n\t\t * @return {void}\n\t\t */\n\t\tdestroy() {\n\t\t\tif (!$delegate) return\n\t\t\tR.forEach(event => $delegate.off(...event))(events)\n\t\t},\n\n\t\t/**\n\t\t * @memberof createEvents\n\t\t * @function destroy\n\t\t * @param {HTMLElement} root - the element to trigger an event on\n\t\t * @param {String} event - the name of the event to trigger\n\t\t * @return {void}\n\t\t */\n\t\temit($node, event) {\n\t\t\temit = emit || document.createEvent('HTMLEvents')\n\t\t\temit.initEvent(event, true, false)\n\t\t\t$node.dispatchEvent(emit)\n\t\t}\n\t}\n})\n\n/**\n * Create a router\n * @mixin EventsMixin\n * @description class used to manage adding/removing delegated dom events\n *\n * @example\n * import Behaviour, { mix } from '@/core/Behaviour'\n * import {\n * \tEventsMixin,\n * } from '@/core/modules/'\n *\n * export default class ExampleWithAllTheThings extends mix(Behaviour).with(\n * \tEventsMixin\n * ) {\n * \tevents = {\n * \t\t'click [data-link]': 'onClick'\n * \t}\n *\n * \tmount = () => {\n * \t\t// attach all the events\n * \t\tthis.$$events.attachAll()\n * \t\t// attach events by key\n * \t\tthis.$$events.attach(['click [data-link]'])\n * \t\t// remove events by key\n * \t\tthis.$$events.remove(['click [data-link]'])\n * \t\t// destroy all the events\n * \t\tthis.$$events.destroy()\n * \t}\n *\n * \tonClick = (e, elm) => {\n * \t\te.preventDefault()\n * \t\telm.classList.toggle('huzzah')\n * \t}\n * }\n * @return {EventsMixin}\n */\nexport const EventsMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$$events = createEvents.call(this, this.$el, this.events)\n\n\t\t\tif (super.init) super.init()\n\n\t\t\treturn this\n\t\t}\n\n\t\tdestroy() {\n\t\t\tthis.$$events.destroy()\n\t\t\tif (super.destroy) super.destroy()\n\t\t}\n\t}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\n\nexport function inview(base = document, events = {}) {\n\tif (!events) return\n\n\tconst defaultOptions = {\n\t\trootMargin: '0px',\n\t\tthreshold: 0\n\t}\n\n\tlet isActive = false\n\tlet observer\n\n\tconst onIntersection = entries => {\n\t\tentries.forEach(item => {\n\t\t\tconst { isIntersecting } = item\n\t\t\tconst type = isIntersecting ? 'enter' : 'exit'\n\t\t\tif (events[type]) {\n\t\t\t\tconst remove = events[type](item)\n\n\t\t\t\tif (remove) {\n\t\t\t\t\tobserver.unobserve(item.target)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction watch({ selector, options = defaultOptions }) {\n\t\tif (window.IntersectionObserver) {\n\t\t\tisActive = true\n\t\t\tobserver = new IntersectionObserver(onIntersection, options)\n\t\t\tconst nodes =\n\t\t\t\ttypeof selector === 'string'\n\t\t\t\t\t? [...base.querySelectorAll(selector)]\n\t\t\t\t\t: selector\n\n\t\t\tR.forEach(item => {\n\t\t\t\tobserver.observe(item)\n\t\t\t})(nodes)\n\t\t}\n\t}\n\n\tfunction destroy() {\n\t\tif (observer && isActive && window.IntersectionObserver) {\n\t\t\tobserver.disconnect()\n\t\t\tisActive = false\n\t\t}\n\t}\n\n\treturn {\n\t\tdestroy,\n\t\twatch\n\t}\n}\n\n/**\n * Create a router\n * @memberof Behaviour\n * @mixin InviewMixin\n * @description class used to manage elements entering/exiting the viewport\n * @example\n * import InviewMixin, { mix } from '@/core/ScreenMixin'\n * import {\n * \tRefsMixin,\n * } from '@/core/modules/'\n *\n * export default class ExampleWithAllTheThings extends mix(Behaviour).with(\n * \tInviewMixin\n * ) {\n * \tmount = () => {\n * \t\tthis.$$inview.watch({\n * \t\t\tselector: '[data-element]'\n * \t\t})\n * \t}\n *\n * \tviewport = {\n *\t\tenter: node => {\n *\t\t\tlog('exit', node)\n *\t\t},\n *\n *\t\texit: node => {\n *\t\t\tlog('exit', node)\n *\t\t}\n *\t}\n * }\n * @return {InviewMixin}\n */\nexport const InviewMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tconst events = this.viewport\n\t\t\tconst base = this.$el\n\t\t\tthis.$$inview = inview(base, events)\n\n\t\t\tif (super.init) super.init()\n\n\t\t\treturn this\n\t\t}\n\n\t\tdestroy() {\n\t\t\tthis.$$inview.destroy()\n\t\t\tif (super.destroy) super.destroy()\n\t\t}\n\t}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","var map = {\n\t\"./Accordion\": [\n\t\t204,\n\t\t11\n\t],\n\t\"./Accordion.js\": [\n\t\t204,\n\t\t11\n\t],\n\t\"./Carousel\": [\n\t\t198,\n\t\t12\n\t],\n\t\"./Carousel.js\": [\n\t\t198,\n\t\t12\n\t],\n\t\"./Draw\": [\n\t\t199,\n\t\t13\n\t],\n\t\"./Draw.js\": [\n\t\t199,\n\t\t13\n\t],\n\t\"./Dropdown\": [\n\t\t200,\n\t\t14\n\t],\n\t\"./Dropdown.js\": [\n\t\t200,\n\t\t14\n\t],\n\t\"./ScrollTo\": [\n\t\t201,\n\t\t15\n\t],\n\t\"./ScrollTo.js\": [\n\t\t201,\n\t\t15\n\t],\n\t\"./Slide\": [\n\t\t202,\n\t\t16\n\t],\n\t\"./Slide.js\": [\n\t\t202,\n\t\t16\n\t],\n\t\"./Validation\": [\n\t\t155,\n\t\t3,\n\t\t17\n\t],\n\t\"./Validation.js\": [\n\t\t155,\n\t\t3,\n\t\t17\n\t],\n\t\"./VideoPlayer\": [\n\t\t203,\n\t\t21,\n\t\t18\n\t],\n\t\"./VideoPlayer.js\": [\n\t\t203,\n\t\t21,\n\t\t18\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\tvar id = ids[0];\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 230;\nmodule.exports = webpackAsyncContext;","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"42d3eb69d2827148d9c2.worker.js\");\n};\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\nimport eventBus from '@/core/modules/eventBus'\n\n/**\n * @namespace loader\n */\n\n/**\n * @memberof loader\n * @description Get data behaviours and instantiate\n * @function gather\n * @property {Promise} fn - The dynamic import function\n * @property {String} attr - The data attribute used to select behaviours\n *\n * @return {Promise}\n *\n */\nexport const gather = (fn, attr = 'data-behaviour') =>\n\tR.compose(\n\t\tR.map(\n\t\t\t({ node, behaviour }) =>\n\t\t\t\tnew Promise(resolve => {\n\t\t\t\t\tfn(behaviour).then(resp => {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tid: behaviour,\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tbehaviour: resp.default\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t),\n\t\tR.flatten,\n\t\tR.map(node =>\n\t\t\tR.compose(\n\t\t\t\tR.map(behaviour => ({\n\t\t\t\t\tbehaviour,\n\t\t\t\t\tnode\n\t\t\t\t})),\n\t\t\t\tR.split(' '),\n\t\t\t\tR.replace(/^\\s+|\\s+$|\\s+(?=\\s)/g, '')\n\t\t\t)(node.getAttribute(attr))\n\t\t)\n\t)\n\n/**\n * @memberof loader\n * @function loader\n * @param {Promise} fn - \n * @example\n * \n * loader(import(`@/behaviours/${behaviour}`))\n *\n * @return {Object}\n *\n */\nexport default function loader(fn) {\n\tconst state = {\n\t\tstack: [],\n\t\tscope: []\n\t}\n\n\tconst gatherBehaviours = gather(fn, 'data-behaviour')\n\n\t/**\n\t * @memberof loader\n\t * @description Get data behaviours and instantiate\n\t * @function hydrate\n\t * @property {HTMLElement} context - the selector to query from\n\t * @property {String} wrapper - css selector, used to work out if an element should be destroyed\n\t *\n\t * @return {Promise}\n\t *\n\t */\n\tfunction hydrate(context, wrapper = '#page-wrapper') {\n\t\treturn Promise.all(\n\t\t\tgatherBehaviours([...context.querySelectorAll('*[data-behaviour]')])\n\t\t).then(data => {\n\t\t\tconst stack = R.map(({ behaviour: Behaviour, node, id }) => {\n\t\t\t\tconst fn = new Behaviour(node, id)\n\t\t\t\tfn.init()\n\t\t\t\tfn.mount()\n\t\t\t\tconst destroy = node.closest(wrapper)\n\t\t\t\treturn { fn, destroy, id }\n\t\t\t})(data)\n\t\t\t\n\t\t\teventBus.emit('window:resize')\n\n\t\t\tconst scope = R.compose(\n\t\t\t\t// R.filter(({ fn }) => typeof fn === 'function'),\n\t\t\t\tR.filter(item => item.destroy)\n\t\t\t)(stack)\n\n\t\t\tObject.assign(state, { stack, scope })\n\n\t\t\treturn state\n\t\t})\n\t}\n\n\t/**\n\t * @memberof loader\n\t * @description Unmount the scoped behaviours\n\t * @function unmount\n\t * @return {void}\n\t */\n\tfunction unmount() {\n\t\tR.compose(\n\t\t\tR.forEach(({ fn }) => {\n\t\t\t\tfn.destroy()\n\t\t\t})\n\t\t)(state.scope)\n\t}\n\n\treturn {\n\t\thydrate,\n\t\tunmount\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","/* eslint-disable no-new */\nimport * as R from 'ramda'\nimport throttle from 'raf-throttle'\nimport eventBus from '@/core/modules/eventBus'\n\n/**\n * @namespace UI\n * @description lazyload data-ui components\n *\n */\nexport default (() => {\n\tconst cache = new Map()\n\n\tconst scan = () => {\n\t\tcache.forEach(async item => {\n\t\t\tconst { query, key, behaviour, node, options, module, hasLoaded } = item\n\t\t\t// has the item already been loaded\n\t\t\tif (hasLoaded) {\n\t\t\t\t// if the query no longer passes call the unmount method\n\t\t\t\tif (query && !window.matchMedia(query).matches) {\n\t\t\t\t\tmodule.unmount()\n\t\t\t\t\t// update the cache\n\t\t\t\t\tcache.set(key, {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\thasLoaded: false\n\t\t\t\t\t})\n\n\t\t\t\t\teventBus.emit(`ui/${key}:unmount`, cache.get(key))\n\t\t\t\t}\n\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\t// if there is a query and it matches, or if there is no query at all\n\t\t\tif (window.matchMedia(query).matches || typeof query === 'undefined') {\n\t\t\t\t// if we haven't already constructured the behaviour\n\t\t\t\tif (!module) {\n\t\t\t\t\t// fetch the behaviour\n\t\t\t\t\tconst resp = await import(/* webpackChunkName: \"ui-[request]\" */ `@/ui/${behaviour}`)\n\t\t\t\t\tconst { default: Ui } = resp\n\t\t\t\t\tlet settings = {\n\t\t\t\t\t\tkey\n\t\t\t\t\t}\n\n\t\t\t\t\tif (options) {\n\t\t\t\t\t\tsettings = { ...settings, ...JSON.parse(options) }\n\t\t\t\t\t}\n\n\t\t\t\t\tconst module = new Ui(node, settings)\n\n\t\t\t\t\tmodule.mount()\n\n\t\t\t\t\tcache.set(key, {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tmodule,\n\t\t\t\t\t\toptions: settings,\n\t\t\t\t\t\thasLoaded: true\n\t\t\t\t\t})\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\teventBus.emit(`ui/${key}:mount`, cache.get(key))\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// we've already contructred the behaviour\n\t\t\t\t\t// we just need to remount it\n\t\t\t\t\tmodule.mount()\n\n\t\t\t\t\tcache.set(key, {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\thasLoaded: true\n\t\t\t\t\t})\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\teventBus.emit(`ui/${key}:mount`, cache.get(key))\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tconst hydrate = (context = document) => {\n\t\tR.compose(\n\t\t\tR.forEach(item => {\n\t\t\t\tconst { key } = item\n\t\t\t\tcache.set(key, item)\n\t\t\t}),\n\t\t\tR.flatten,\n\t\t\tR.map(node =>\n\t\t\t\tR.compose(\n\t\t\t\t\tR.map(behaviour => {\n\t\t\t\t\t\tconst { key, uiOptions: options, query } = node.dataset\n\t\t\t\t\t\tif (!key) {\n\t\t\t\t\t\t\tthrow new Error('ui components must have a unique key')\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tbehaviour,\n\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\tkey,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t\thasLoaded: false\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t\tR.split(' '),\n\t\t\t\t\tR.replace(/^\\s+|\\s+$|\\s+(?=\\s)/g, '')\n\t\t\t\t)(node.getAttribute('data-ui'))\n\t\t\t)\n\t\t)([...context.querySelectorAll('*[data-ui]')])\n\n\t\tscan()\n\t}\n\n\tconst destroy = (selector = '.page-child') => {\n\t\tcache.forEach(({ module, key, hasLoaded, node }) => {\n\t\t\tif (hasLoaded && node.closest(selector)) {\n\t\t\t\tmodule.destroy()\n\t\t\t\tcache.delete(key)\n\t\t\t}\n\t\t})\n\t}\n\n\tconst handle = throttle(scan)\n\n\twindow.addEventListener('resize', handle, false)\n\n\treturn {\n\t\thydrate,\n\n\t\tdestroy,\n\n\t\tcache\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\n\nexport const removeSpecialCharacters = R.compose(\n\tR.trim,\n\tR.replace(/\\s+/g, ' '),\n\tR.replace(/[^a-zA-Z\\d\\s:]/g, '')\n)\n\nexport const pascalify = R.memoizeWith(R.identity, str =>\n\tR.compose(\n\t\tR.join(''),\n\t\tR.over(R.lensIndex(0))(R.toUpper),\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? R.toUpper(ch) : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n)\n\nexport const camelify = R.memoizeWith(R.identity, str =>\n\tR.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? R.toUpper(ch) : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters,\n\t\tR.replace('-', ' ')\n\t)(str)\n)\n\nexport const slugify = R.memoizeWith(R.identity, str =>\n\tR.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? `-${R.toLower(ch)}` : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n)\n\nexport const snakeify = R.memoizeWith(R.identity, str =>\n\tR.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? `_${R.toLower(ch)}` : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n)\n\nexport const segmentize = R.compose(\n\tR.filter(R.identity),\n\tR.split('/'),\n\tR.replace(/(^\\/+|\\/+$)/g, '')\n)\n\nexport const beautifyPath = R.compose(R.join('/'), segmentize)\n\nexport const leadingSlashPath = str => `/${beautifyPath(str)}`\n\nexport const slugFromPath = R.compose(R.last, segmentize)\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import pathToRegexp from 'path-to-regexp'\nimport { segmentize, beautifyPath, slugFromPath } from '@/core/utils/strings'\n\n/**\n * extracts meta data from urls (queries, hash, host, et al)\n * @memberof RouterUtils\n * @function parseUri\n *\n * @property {String} url - the url to parse\n *\n * @return {Object}\n */\nexport function parseUri(str) {\n\tconst o = parseUri.options\n\tconst m = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str)\n\tconst uri = {}\n\tlet i = 14\n\n\twhile (i--) uri[o.key[i]] = m[i] || '' // eslint-disable-line\n\n\turi[o.q.name] = {}\n\turi[o.key[12]].replace(o.q.parser, ($0, $1, $2) => {\n\t\tif ($1) uri[o.q.name][$1] = $2\n\t})\n\n\treturn uri\n}\n\nparseUri.options = {\n\tstrictMode: false,\n\tkey: [\n\t\t'source',\n\t\t'protocol',\n\t\t'authority',\n\t\t'userInfo',\n\t\t'user',\n\t\t'password',\n\t\t'host',\n\t\t'port',\n\t\t'relative',\n\t\t'path',\n\t\t'directory',\n\t\t'file',\n\t\t'query',\n\t\t'anchor'\n\t],\n\tq: {\n\t\tname: 'queryKey',\n\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t},\n\tparser: {\n\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\tloose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t}\n}\n\nfunction decodeParam(param) {\n\ttry {\n\t\treturn decodeURIComponent(param)\n\t} catch (_) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error('decodeParam error')\n\t}\n}\n\n/**\n *\n * @memberof RouterUtils\n * @function createPathObject\n * @property {Object} options - pathToRegexp options\n *\n * @return {Function}\n */\nfunction createPathObject(options = {}) {\n\treturn function(path) {\n\t\tconst keys = []\n\t\tconst re = pathToRegexp(path, keys, options)\n\n\t\treturn function(pathname, params = {}) {\n\t\t\tconst m = re.exec(pathname)\n\t\t\tif (!m) return false\n\t\t\tconst output = params\n\n\t\t\tlet key\n\t\t\tlet param\n\t\t\tfor (let i = 0; i < keys.length; i += 1) {\n\t\t\t\tkey = keys[i]\n\t\t\t\tparam = m[i + 1]\n\t\t\t\t// eslint-disable-next-line no-continue\n\t\t\t\tif (!param) continue\n\t\t\t\toutput[key.name] = decodeParam(param)\n\t\t\t\tif (key.repeat) output[key.name] = params[key.name].split(key.delimiter)\n\t\t\t}\n\n\t\t\treturn output\n\t\t}\n\t}\n}\n\n/**\n *\n * @memberof RouterUtils\n * @function matchRoute\n * @return {Function}\n *\n */\nexport const matchRoute = createPathObject({\n\t// path-to-regexp options\n\tsensitive: false,\n\tstrict: false,\n\tend: false\n})\n\n/**\n *\n * @memberof RouterUtils\n * @function parseUrl\n * @property {String} href - the url to parse\n * @return {Object}\n *\n */\nexport const parseUrl = href => {\n\tconst { anchor: hash, host, path, queryKey, source } = parseUri(href)\n\treturn {\n\t\tisRoot: path === '/',\n\t\tpath: beautifyPath(path),\n\t\traw: path,\n\t\tsegments: segmentize(path),\n\t\tslug: slugFromPath(path),\n\t\thash,\n\t\thost,\n\t\tsource,\n\t\tquery: queryKey\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\nimport { segmentize, beautifyPath } from '@/core/utils/strings'\nimport local from 'local-links'\nimport { parseUrl } from './parseUrl'\n\n/**\n *\n * @memberof RouterUtils\n * @function localLinks\n * @description adds target blank and rel noopener attributes to external links\n * @property {HTMLElement} scope - the element to query from\n * @return {Object}\n *\n */\nexport const localLinks = scope =>\n\t[...scope.querySelectorAll('a')]\n\t\t.filter(\n\t\t\ta =>\n\t\t\t\tlocal.isLocal('click', a, true) === null &&\n\t\t\t\ta.href !== window.location.href\n\t\t)\n\t\t.forEach(a => {\n\t\t\ta.setAttribute('target', '_blank')\n\t\t\ta.setAttribute('rel', 'noopener')\n\t\t})\n\n/**\n *\n * @memberof RouterUtils\n * @function preventClick\n * @description checks whether a link should be handled by the router\n * @author https://github.com/luruke/barba.js/blob/master/src/Pjax/Pjax.js\n * @property {Object} evt - the event object\n * @property {HTMLElement} element - the anchor being tested\n * @return {Boolean}\n *\n */\nexport function preventClick(evt, element) {\n\tif (!element || !element.href) return\n\n\tconst { href } = element\n\n\t// Middle click, cmd click, and ctrl click\n\tif (evt.which > 1 || evt.metaKey || evt.ctrlKey || evt.shiftKey || evt.altKey)\n\t\treturn\n\n\t// Ignore target with _blank target\n\tif (element.target && element.target === '_blank') return\n\n\t// Check if it's the same domain\n\tif (\n\t\twindow.location.protocol !== element.protocol ||\n\t\twindow.location.hostname !== element.hostname\n\t)\n\t\treturn\n\n\t// Check if the port is the same\n\n\t// Ignore case when a hash is being tacked on the current URL\n\tif (href.indexOf('#') > -1) return\n\n\t// Ignore case where there is download attribute\n\tif (\n\t\telement.getAttribute &&\n\t\ttypeof element.getAttribute('download') === 'string'\n\t)\n\t\treturn\n\n\tif (element.hasAttribute('data-no-route')) return\n\n\treturn true\n}\n/**\n *\n * @memberof RouterUtils\n * @function activeLinks\n * @description add active classes to any active elements\n * @return {function}\n *\n */\nexport const activeLinks = (() => {\n\tlet previous\n\tlet $anchors = []\n\n\tconst defaultClasses = {\n\t\tmatch: 'is-current',\n\t\troot: 'is-current-root',\n\t\tparent: 'is-current-parent'\n\t}\n\n\treturn ({ scope, classes }) => {\n\t\t$anchors = scope\n\n\t\tconst classNames = {\n\t\t\t...defaultClasses,\n\t\t\t...classes\n\t\t}\n\n\t\treturn url => {\n\t\t\tconst { path, segments: testSegments } = parseUrl(url)\n\n\t\t\tif (previous) {\n\t\t\t\tR.forEach(({ node, className }) => {\n\t\t\t\t\tif (classNames[className]) {\n\t\t\t\t\t\tnode.classList.remove(classNames[className])\n\t\t\t\t\t}\n\t\t\t\t})(previous)\n\n\t\t\t\tprevious = []\n\t\t\t}\n\n\t\t\tprevious = R.compose(\n\t\t\t\tR.forEach(({ node, className }) => {\n\t\t\t\t\tif (classNames[className]) {\n\t\t\t\t\t\tnode.classList.add(classNames[className])\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tR.reduce((acc, [, value]) => {\n\t\t\t\t\tacc.push(...value)\n\t\t\t\t\treturn acc\n\t\t\t\t}, []),\n\t\t\t\tObject.entries,\n\t\t\t\tR.map(\n\t\t\t\t\tR.compose(\n\t\t\t\t\t\tR.filter(\n\t\t\t\t\t\t\t({ segments, matchAgainst }) =>\n\t\t\t\t\t\t\t\tmatchAgainst === R.join('/', segments)\n\t\t\t\t\t\t),\n\t\t\t\t\t\tR.map(node => {\n\t\t\t\t\t\t\tconst { href } = node\n\t\t\t\t\t\t\tconst { path: pathname } = parseUrl(href)\n\n\t\t\t\t\t\t\tconst segments = segmentize(pathname)\n\t\t\t\t\t\t\tconst length = R.length(segments)\n\t\t\t\t\t\t\tconst matchAgainst = R.compose(\n\t\t\t\t\t\t\t\tR.join('/'),\n\t\t\t\t\t\t\t\tR.take(length)\n\t\t\t\t\t\t\t)(testSegments)\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\tsegments,\n\t\t\t\t\t\t\t\tmatchAgainst,\n\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\tbeautifyPath(pathname) === path\n\t\t\t\t\t\t\t\t\t\t? 'match'\n\t\t\t\t\t\t\t\t\t\t: length === 1\n\t\t\t\t\t\t\t\t\t\t? 'root'\n\t\t\t\t\t\t\t\t\t\t: 'parent'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tR.groupBy(({ pathname }) => segmentize(pathname).length),\n\t\t\t\tR.filter(item => {\n\t\t\t\t\tconst { href } = item\n\t\t\t\t\tconst { path: pathname } = parseUrl(href)\n\n\t\t\t\t\tconst segments = segmentize(pathname)\n\t\t\t\t\treturn (\n\t\t\t\t\t\tR.head(segments) === R.head(testSegments) &&\n\t\t\t\t\t\tsegments.length <= testSegments.length\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t)($anchors)\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import createHistory from 'history/createBrowserHistory'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Action from './actions'\n\n/**\n * @typedef {Object} History\n * @property {function} set Set an items into cache\n * @property {String} set.key Name of the item to cache\n * @property {Object} set.value Value of the item to cache\n * @property {function} get Get an item from the cache\n * @property {String} get.key Name of the item to get\n * @property {function} push push an item onto the history stack\n *\n */\n\n/**\n * @memberof RouterUtils\n * @function historyManager\n * @return {History}\n */\nconst historyManager = (() => {\n\t// create a new history instance\n\tconst history = createHistory()\n\t// object to how the current/previous paths\n\tconst store = {}\n\n\t// listen to any history changes\n\thistory.listen((location, action) => {\n\t\tconst { pathname, state, hash } = location\n\n\t\tif (pathname === window.location.pathname && hash) return\n\n\t\t// if 'POP'... i.e forward/backward\n\t\t// emit the event\n\t\tif (action === 'POP') {\n\t\t\tlog('hello')\n\t\t\teventBus.emit(Action.ROUTER_POP_EVENT, { pathname, state })\n\t\t}\n\t})\n\n\treturn {\n\t\tset(key, value) {\n\t\t\tstore[key] = value\n\t\t},\n\n\t\tget(key) {\n\t\t\treturn store[key]\n\t\t},\n\n\t\tpush(...args) {\n\t\t\thistory.push(...args)\n\t\t}\n\t}\n})()\n\nexport default historyManager\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import { leadingSlashPath } from '@/core/utils/strings'\n\n/**\n * @typedef {Object} Cache\n * @property {function} set Set an items into cache\n * @property {String} set.key Name of the item to cache\n * @property {Object} set.value Value of the item to cache\n * @property {function} get Get an item from the cache\n * @property {String} get.key Name of the item to get\n * @property {function} has Check if an item is in the cache\n * @property {String} has.key Name of the item to check\n */\n\n/**\n * @memberof RouterUtils\n * @function cache\n * @description Wrapper around a Map. The keys are sanitized before adding\n * @return {Cache}\n */\nconst cache = (() => {\n\tconst cache = new Map()\n\n\treturn {\n\t\tset(key, value) {\n\t\t\tcache.set(leadingSlashPath(key), value)\n\t\t},\n\n\t\tget(key) {\n\t\t\treturn cache.get(leadingSlashPath(key))\n\t\t},\n\n\t\thas(key) {\n\t\t\treturn cache.has(leadingSlashPath(key))\n\t\t}\n\t}\n})()\n\nexport default cache\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import cache from './cache'\n\nconst Queue = new Set()\n\nexport { Queue }\n/**\n * @memberof RouterUtils\n * @function request\n *\n * @property {String} pathname - pathname to fetch\n * @property {Object} options - options to be used by fetch\n * @property {String} type - the type of response\n * @return {Promise}\n */\n\nexport default (\n\tpathname,\n\toptions = {\n\t\theaders: {\n\t\t\t'X-SPONJS-ROUTE': 'true'\n\t\t}\n\t},\n\ttype = 'text'\n) =>\n\tnew Promise(async resolve => {\n\t\t// are we in the cache... yeah... get me and return\n\n\t\tQueue.add(pathname)\n\t\tconst fromCache = cache.get(pathname)\n\n\t\tif (fromCache && fromCache.status === 'cached') {\n\t\t\tresolve(cache.get(pathname).data)\n\t\t\treturn\n\t\t}\n\n\t\tcache.set(pathname, { status: 'loading' })\n\n\t\tconst timer = setTimeout(() => {\n\t\t\twindow.location = pathname\n\t\t}, 5000)\n\n\t\t/** *\n\t\t * native fetch\n\t\t *\n\t\t * @param {String} - the pathname\n\t\t * @param {Object} - any fetch options\n\t\t *\n\t\t * @return :promise\n\t\t */\n\t\tconst data = await fetch(pathname, options).then(response => {\n\t\t\tclearTimeout(timer)\n\t\t\tQueue.delete(pathname)\n\n\t\t\tconst { ok, status, url } = response\n\t\t\tcache.set(pathname, { status: 'loaded' })\n\t\t\tif (ok) {\n\t\t\t\t// return the response transform\n\t\t\t\t// i.e. for html response.html(), or json: response.json()\n\t\t\t\treturn response[type]()\n\t\t\t}\n\n\t\t\t// things are not so good....\n\t\t\t// object to hold all that went wrong\n\t\t\tconst resp = {\n\t\t\t\tdata: false,\n\t\t\t\tok,\n\t\t\t\tstatus,\n\t\t\t\turl\n\t\t\t}\n\t\t\treturn resp\n\t\t})\n\n\t\t// we have the goodies\n\t\t// add it to the cache\n\n\t\tif (data) {\n\t\t\tcache.set(pathname, {\n\t\t\t\tstatus: 'cached',\n\t\t\t\tdata\n\t\t\t})\n\t\t}\n\t\t// we are done here... pass the response on\n\t\tresolve(data)\n\t})\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import * as R from 'ramda'\nimport Worker from './fetch.worker.js'\nimport cache from './cache'\nimport { preventClick } from './utils/links'\nimport { inview } from '@/core/modules/inview'\n\n/**\n * @typedef {Object} Lazyload\n * @property {function} load function to track items in the viewport and fetch\n * @property {Array} load.args an array of anchors\n *\n */\n\n/**\n * Create a router\n * @memberof RouterUtils\n * @description fetch links within the viewport on a web worker\n * @function lazyload\n * @return {Lazyload}\n */\n\nexport default (() => {\n\t// setup a worker\n\tconst worker = new Worker()\n\t// setup an array to store\n\tconst errorLinks = []\n\n\tconst getLinks = R.compose(\n\t\t// reject error items\n\t\tR.head,\n\t\tR.reject(key => R.contains(key)(errorLinks)),\n\t\t// ignore any that are in the cache\n\t\tR.filter(\n\t\t\tpathname => pathname !== window.location.pathname && !cache.has(pathname)\n\t\t),\n\t\t// just get the unique paths\n\t\tR.uniqBy(value => value),\n\t\t// grab the pathname\n\t\tR.map(R.prop('pathname'))\n\t)\n\n\tconst viewport = inview(document, {\n\t\tenter({ isIntersecting, target }) {\n\t\t\tif (isIntersecting) {\n\t\t\t\tconst link = getLinks([target])\n\t\t\t\tif (link) {\n\t\t\t\t\t// R.forEach(worker.postMessage)(links)\n\t\t\t\t\tcache.set(link, { status: 'loading' })\n\t\t\t\t\tworker.postMessage({ link })\n\t\t\t\t}\n\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t})\n\n\t// add listen to events...\n\tworker.addEventListener('message', ({ data }) => {\n\t\tdata.forEach(({ key, data }) => {\n\t\t\t// log(`fetched: ${key}`)\n\t\t\tif (data) {\n\t\t\t\tcache.set(key, { data, status: 'cached' })\n\t\t\t} else {\n\t\t\t\tif (!R.contains(key)(errorLinks)) {\n\t\t\t\t\terrorLinks.push(key)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t})\n\n\tviewport.watch({\n\t\tselector: '[data-prefetch]'\n\t})\n\n\treturn {\n\t\tfetch(nodes) {\n\t\t\tconst validLinks = R.compose(\n\t\t\t\tR.take(10),\n\t\t\t\tR.filter(link => {\n\t\t\t\t\tconst href = link.href.replace(window.location.origin, '')\n\t\t\t\t\treturn !preventClick({}, href) && !cache.has(href)\n\t\t\t\t})\n\t\t\t)(nodes)\n\n\t\t\tviewport.destroy()\n\n\t\t\tviewport.watch({\n\t\t\t\tselector: validLinks\n\t\t\t})\n\t\t},\n\n\t\tcancel() {\n\t\t\tworker.postMessage('cancel')\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import pathToRegexp from 'path-to-regexp'\nimport * as R from 'ramda'\nimport * as str from '@/core/utils/strings'\nimport { matchRoute, parseUrl } from './parseUrl'\n\n/**\n * @memberof RouterUtils\n * @function mapChildren\n * @description recursively loop over any route children returns a functions that expects an array of routes\n *\n * @property {String} base - The base path\n *\n * @return {Function}\n */\nfunction mapChildren(base) {\n\treturn R.compose(\n\t\tR.flatten,\n\t\tR.map(({ children, path, ...rest }) => {\n\t\t\tconst container = []\n\t\t\tconst tmpPath = path ? str.beautifyPath(`${base}${path}`) : ':regex'\n\n\t\t\tcontainer.push({\n\t\t\t\tpath: tmpPath,\n\t\t\t\tpattern: typeof path === 'string' ? false : path,\n\t\t\t\tparent: str.beautifyPath(base),\n\t\t\t\t...rest\n\t\t\t})\n\n\t\t\tif (children) {\n\t\t\t\tconst items = Array.isArray(children) ? children : [children]\n\t\t\t\tcontainer.push(mapChildren(`${base}${path}`)(items))\n\t\t\t}\n\t\t\treturn container\n\t\t})\n\t)\n}\n\n/**\n * @memberof RouterUtils\n * @function flattenRoutes\n * @description Flatten the nest route map into a 1 dimensional array\n * @property {Array} - The routes array to flatten\n * @return {Array} - The flattened route\n */\nexport const flattenRoutes = R.reduce((acc, curr) => {\n\tconst { path: tmpPath, children, ...rest } = curr\n\tconst tmp = []\n\n\tconst path = tmpPath\n\n\ttmp.push({ path: str.beautifyPath(tmpPath), ...rest })\n\n\tif (children) {\n\t\tconst items = Array.isArray(children) ? children : [children]\n\t\ttmp.push(...mapChildren(path)(items))\n\t}\n\n\tacc.push(...tmp)\n\n\treturn acc\n}, [])\n\n/**\n * @memberof RouterUtils\n * @function matches\n * @description finds all the route matches and gives each match a score\n * @property {Array} routes - The routes array to search through\n * @property {Object} data - data about the requested url\n * @return {Array} - An array of matching routes\n */\n\nconst matches = (routes, data) => {\n\tconst { path: slug } = data\n\n\treturn R.compose(\n\t\tR.reverse,\n\t\tR.sortBy(R.prop('score')),\n\t\tR.map(({ path, pattern, ...rest }) => {\n\t\t\tconst last = str.slugFromPath(slug)\n\t\t\tconst slugLength = str.segmentize(slug).length\n\t\t\tconst pathLength = str.segmentize(path).length\n\t\t\tlet score = 1\n\t\t\tlet pageNo = null\n\n\t\t\t// exact match?\n\t\t\tif (str.beautifyPath(slug) === path) {\n\t\t\t\tscore = 5\n\t\t\t} else {\n\t\t\t\t// pattern, and the last segment matches the regexp\n\t\t\t\tif (pattern && pathToRegexp(pattern).exec(last)) {\n\t\t\t\t\tscore = 4\n\t\t\t\t\t// get the page number\n\t\t\t\t\tpageNo = R.compose(\n\t\t\t\t\t\tparseInt,\n\t\t\t\t\t\tR.head,\n\t\t\t\t\t\tR.match(/\\d+/g)\n\t\t\t\t\t)(last)\n\t\t\t\t} else if (slugLength === pathLength) {\n\t\t\t\t\tscore = 3\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { route: path, score, pattern, pageNo, params: data, ...rest }\n\t\t}),\n\t\tR.filter(({ path }) => matchRoute(path)(str.beautifyPath(slug)))\n\t)(routes)\n}\n\n/**\n * @typedef {Object} Route\n * @property {Object} route - the matched route\n * @property {Object} rest - all the other properties from the url data\n * @property {Object} params - any url params\n */\n\n/**\n * @memberof RouterUtils\n * @function findRoute\n * @description function used to match urls to routes\n * @property {Array} routes - The routes array to search through\n * @return {Route}\n */\nexport const findRoute = routes => {\n\tconst routeMap = flattenRoutes(routes)\n\treturn url => {\n\t\tconst data = parseUrl(url)\n\t\tconst { isRoot } = data\n\n\t\tif (isRoot) {\n\t\t\tconst { path: route, ...rest } = R.find(R.propEq('path', '/'))(routes)\n\n\t\t\treturn {\n\t\t\t\troute,\n\t\t\t\t...rest,\n\t\t\t\tparams: data\n\t\t\t}\n\t\t}\n\n\t\tconst match = R.head(matches(routeMap, data))\n\n\t\tif (match && match.score > 1) {\n\t\t\treturn match\n\t\t}\n\n\t\tconst { path: route, ...rest } = R.find(R.propEq('path', '*'))(routes)\n\n\t\treturn {\n\t\t\troute,\n\t\t\t...rest,\n\t\t\tparams: data\n\t\t}\n\t}\n}\n\n// const find = findRoute(routes)\n\n// find('https://www.our.com/a/p2?test=hello#terry') // ?\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","export const setTransitionAttributes = (() => {\n\tconst $body = document.body\n\n\treturn {\n\t\tlifecycle: state => {\n\t\t\t$body.setAttribute('data-transition-state', state)\n\t\t},\n\n\t\tfrom: from => {\n\t\t\t$body.setAttribute('data-transition-from', from)\n\t\t},\n\n\t\tto: to => {\n\t\t\t$body.setAttribute('data-transition-to', to)\n\t\t},\n\n\t\ttoggleCustomBodyProp: prop => {\n\t\t\tif (prop) {\n\t\t\t\t$body.setAttribute('data-page-with', prop)\n\t\t\t} else {\n\t\t\t\t$body.removeAttribute('data-page-with')\n\t\t\t}\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","/**\n * @memberof RouterUtils\n * @typedef {Object} transition\n *\n * @function transition\n *\n * @property {String} el - css selector for the html to inject\n * @property {function} onLoad - function called on the inital load\n * @property {Object} onLoad.props - from/to/dom props\n * @property {function} shouldUnmount - function called before unmounting previous behaviours\n * @property {Object} shouldUnmount.props - from/to/dom props\n * @property {function} shouldMount - function called before mounting next behaviours\n * @property {Object} shouldUnmount.props - from/to/dom props\n * @property {function} onError - called in the event of an error\n * @property {Object} onError.props - from/to/dom props\n * @property {function} updateDom - function used to update the dom\n * @property {Object} updateDom.props - from/to/dom props\n * @property {function} onExit - called when the request has been made\n * @property {Object} onExit.props - from/to/dom props\n * @property {function} onAfterExit - called after the request response\n * @property {Object} onAfterExit.props - from/to/dom props\n * @property {function} onEnter - called when entering the new path\n * @property {Object} onEnter.props - from/to/dom props\n * @property {function} onEnter - called after entering the new path\n * @property {Object} onAfterEnter.props - from/to/dom props\n */\n\nexport default {\n\tel: '.page-child',\n\n\tonLoad(props) {\n\t\tlog('onLoad', props) // eslint-disable-line no-console\n\t},\n\n\tshouldUnmount() {\n\t\treturn true\n\t},\n\n\tshouldMount() {\n\t\treturn true\n\t},\n\n\tonError: props => {\n\t\tlog('error loading page', props) // eslint-disable-line no-console\n\t},\n\n\tupdateDom({ wrapper, newHtml, title }) {\n\t\twrapper.innerHTML = '' // eslint-disable-line no-param-reassign\n\t\twrapper.appendChild(newHtml)\n\t\tdocument.title = title\n\t},\n\n\tonExit({ next }) {\n\t\tlog('on exit')\n\t\t// console.table({ from: from.data.path, to: to.data.path, action }) // eslint-disable-line\n\t\tnext()\n\t},\n\n\tonAfterExit() {\n\t\tlog('after exit')\n\t},\n\n\tonEnter({ next }) {\n\t\tlog('on enter')\n\t\tnext()\n\t},\n\n\tonAfterEnter() {\n\t\tlog('on after enter')\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import domify from 'domify'\nimport { findRoute } from './utils/paths'\nimport { setTransitionAttributes } from './utils/dom'\nimport baseTransition from './transition'\nimport request from './request'\nimport historyManager from './history'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Action from './actions'\n\nexport default class Lifecycle {\n\tconstructor({ routes, rootNode }) {\n\t\tthis.matchRoute = findRoute(routes)\n\n\t\thistoryManager.set('from', this.matchRoute(window.location.href))\n\t\tthis.wrapper = rootNode\n\t}\n\n\tonLoad = pathname => {\n\t\t// get the new route object\n\t\tconst state = this.matchRoute(pathname)\n\n\t\t// combine the transition methods\n\t\tconst view = { ...baseTransition, ...state.view }\n\n\t\t// all the onLoad method\n\t\tview.onLoad(state)\n\n\t\t// emit this bad boy\n\t\teventBus.emit(Action.ROUTE_TRANSITION_LOAD, state)\n\n\t\tsetTransitionAttributes.lifecycle('on-load')\n\t}\n\n\tinit = async ({ pathname, action, transition: trans, dataAttrs }) => {\n\t\t// get the new route object\n\n\t\tconst newState = this.matchRoute(pathname)\n\t\t// have we been supplied with a transition object... no.. use the route one <--- transition prop needs testing\n\n\t\tconst view = trans || newState.view\n\t\t// update the from history store.... <REWITE></REWITE>\n\t\t// historyManager.store.to = newState\n\t\thistoryManager.set('to', newState)\n\n\t\tconst from = historyManager.get('from')\n\t\tconst to = historyManager.get('to')\n\n\t\t// combine the transition methods for exit... basic + route exits\n\t\tthis.exitTransition = Object.assign({}, baseTransition, from.view)\n\n\t\t// combine the transition methods for exit... basic + route enters\n\t\tthis.enterTransition = Object.assign({}, baseTransition, view)\n\n\t\t// setup the props to be passed to onExit and onExitComplete\n\t\tconst exitProps = {\n\t\t\tto,\n\t\t\tfrom,\n\t\t\twrapper: this.wrapper,\n\t\t\toldHtml: document.querySelector(this.exitTransition.el),\n\t\t\taction,\n\t\t\tdataAttrs\n\t\t}\n\n\t\tconst [markup] = await Promise.all([\n\t\t\trequest(pathname),\n\t\t\tthis.onExit(exitProps)\n\t\t])\n\n\t\teventBus.emit(Action.ROUTE_TRANSITION_RESOLVED, exitProps)\n\n\t\tif (from.name) {\n\t\t\tsetTransitionAttributes.from(from.name)\n\t\t}\n\t\tif (to.name) {\n\t\t\tsetTransitionAttributes.to(to.name)\n\t\t}\n\t\tsetTransitionAttributes.lifecycle('on-exit')\n\n\t\tconst html = domify(markup)\n\t\tconst title = html.querySelector('title').textContent.trim()\n\t\t// query the new newHtml for the selector defined on\n\t\t// this object... default = '.page-child'\n\t\tconst newHtml = html.querySelector(this.enterTransition.el)\n\t\tconst enterProps = {\n\t\t\t...exitProps,\n\t\t\tnewHtml,\n\t\t\ttitle,\n\t\t\thtml\n\t\t}\n\n\t\t// check... do we want to unmount the previous html\n\t\tconst shouldUnmount = this.enterTransition.shouldUnmount(enterProps)\n\t\tconst shouldMount = this.enterTransition.shouldMount(enterProps)\n\n\t\t// if we do... sure... unmount event\n\t\tif (shouldUnmount)\n\t\t\teventBus.emit(Action.ROUTE_TRANSITION_BEFORE_DOM_UPDATE, exitProps)\n\n\t\t// no proms here.. just call this method\n\t\tthis.exitTransition.onAfterExit(exitProps)\n\t\t// update the dom method\n\n\t\tthis.enterTransition.updateDom(enterProps)\n\n\t\tif (to.customBodyProp) {\n\t\t\tconst prop = to.customBodyProp(newHtml)\n\t\t\tsetTransitionAttributes.toggleCustomBodyProp(prop)\n\t\t} else {\n\t\t\tsetTransitionAttributes.toggleCustomBodyProp(false)\n\t\t}\n\n\t\t// emit update event\n\t\tif (shouldMount)\n\t\t\teventBus.emit(Action.ROUTE_TRANSITION_AFTER_DOM_UPDATE, enterProps)\n\n\t\tsetTransitionAttributes.lifecycle('on-after-exit')\n\n\t\tawait this.onEnter(enterProps)\n\n\t\tthis.enterTransition.onAfterEnter(enterProps)\n\t\tsetTransitionAttributes.lifecycle('done')\n\n\t\thistoryManager.set('from', newState)\n\t\teventBus.emit(Action.ROUTE_TRANSITION_COMPLETE, enterProps)\n\n\t\treturn enterProps\n\t}\n\n\tonExit = async props => {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tthis.exitTransition.onExit({\n\t\t\t\t...props,\n\t\t\t\tnext: resolve,\n\t\t\t\tonError: reject\n\t\t\t})\n\t\t})\n\t}\n\n\tonEnter = async props => {\n\t\tawait new Promise((resolve, reject) => {\n\t\t\tthis.enterTransition.onEnter({\n\t\t\t\t...props,\n\t\t\t\tnext: resolve,\n\t\t\t\tonError: reject\n\t\t\t})\n\t\t})\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import NProgress from 'nprogress'\nimport { createEvents } from '@/core/modules/createEvents'\nimport eventBus from '@/core/modules/eventBus'\nimport { composeProps } from '@/core/modules/refs'\nimport { preventClick, activeLinks, localLinks } from './utils/links'\nimport historyManager from './history'\nimport cache from './cache'\nimport request, { Queue } from './request'\nimport lazyload from './lazyload'\nimport Lifecycle from './lifecycle'\nimport * as Action from './actions'\n\n/**\n * @namespace RouterUtils\n */\n\nexport default (() => {\n\tconst defaultRoutes = [\n\t\t{\n\t\t\tpath: '/',\n\t\t\tview: {}\n\t\t},\n\t\t{\n\t\t\tpath: '*',\n\t\t\tview: {}\n\t\t}\n\t]\n\n\t/**\n\t * Create a router\n\t * @namespace Router\n\t *\n\t * @class Router\n\t *\n\t * @param {Object} options\n\t * @param {String} options.routes - an array of routes\n\t * @param {HTMLElement} options.rootNode - the root html element\n\t * @param {Array} options.navLinks - any array of anchors to update on transition\n\t * @param {Object} options.classes.match - The class applied to matching linkes\n\t * @param {Object} options.classes.root - The class applied to matching root link\n\t * @param {Object} options.classes.parent - The class applied to mathcing parent link\n\t *\n\t */\n\treturn class Router {\n\t\tconstructor({\n\t\t\troutes = defaultRoutes,\n\t\t\trootNode,\n\t\t\tnavLinks,\n\t\t\tclasses,\n\t\t\tonEnter,\n\t\t\tonExit,\n\t\t\tprefetchTargets = '[data-prefetch]',\n\t\t\tprogressOptions = {\n\t\t\t\tshowSpinner: true\n\t\t\t}\n\t\t}) {\n\t\t\tthis.lifecycle = new Lifecycle({ routes, rootNode })\n\n\t\t\tthis.lifecycle.onLoad()\n\n\t\t\tthis.prefetchTargets = prefetchTargets\n\n\t\t\t// the root node...\n\t\t\tthis.$wrapper = rootNode\n\t\t\tthis.$links = activeLinks({ scope: navLinks, classes })\n\n\t\t\t// set the dom events\n\t\t\tthis.$events = createEvents.call(this, document, {\n\t\t\t\t'click a': 'onClick',\n\t\t\t\t'mouseover a': 'onMouseEnter'\n\t\t\t})\n\n\t\t\teventBus.on(Action.ROUTE_TRANSITION_BEFORE_DOM_UPDATE, onExit)\n\n\t\t\teventBus.on(Action.ROUTE_TRANSITION_AFTER_DOM_UPDATE, onEnter)\n\n\t\t\tNProgress.configure(progressOptions)\n\n\t\t\treturn this\n\t\t}\n\n\t\t/** *\n\t\t * @static goTo\n\t\t * @memberof Router\n\t\t * @param {Object} options\n\t\t * @param {String} options.pathname - pathname for the page to navigate to\n\t\t * @param {String} options.action - the type of history action\n\t\t * @param {Object} options.dataAttrs - any data attributes on the link clicked\n\t\t * @param {Object} transition - transition, a custom transition object\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tasync goTo({ pathname, action, dataAttrs }, transition) {\n\t\t\ttry {\n\t\t\t\tNProgress.start()\n\n\t\t\t\tconst { newHtml } = await this.lifecycle.init({\n\t\t\t\t\tpathname,\n\t\t\t\t\taction,\n\t\t\t\t\ttransition,\n\t\t\t\t\tdataAttrs\n\t\t\t\t})\n\t\t\t\tlocalLinks(newHtml)\n\n\t\t\t\tif (action === 'PUSH') {\n\t\t\t\t\thistoryManager.push(pathname, { attr: dataAttrs })\n\t\t\t\t}\n\t\t\t\tNProgress.done()\n\t\t\t} catch (err) {\n\t\t\t\teventBus.emit(Action.ROUTER_PAGE_NOT_FOUND, err)\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.warn(`[PREFETCH] no page found at ${err}`)\n\t\t\t\twindow.location = pathname\n\t\t\t}\n\t\t}\n\n\t\t/** *\n\t\t * @method onMouseEnter\n\t\t * @memberof Router\n\t\t * @description mouse enter event, triggers a fetch\n\t\t * @param {Object} e - event object\n\t\t * @param {HTMLElement} elm - the html element entered\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tonMouseEnter = (e, elm) => {\n\t\t\tconst { href } = elm\n\t\t\tconst pathname = href.replace(window.location.origin, '')\n\t\t\tconst fromCache = cache.get(pathname)\n\n\t\t\tif (!preventClick(e, elm) || fromCache || Queue.size >= 4) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\trequest(pathname).catch(err => {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tconsole.warn(`[PREFETCH] no page found at ${pathname}`, err)\n\t\t\t})\n\t\t}\n\n\t\t/** *\n\t\t * @method onClick\n\t\t * @memberof Router\n\t\t * @description mouse click event, triggers a fetch\n\t\t * @param {Object} e - event object\n\t\t * @param {HTMLElement} elm - the html element entered\n\t\t *\n\t\t * @return {void}\n\t\t */\n\t\tonClick = (e, elm) => {\n\t\t\tconst { href } = elm\n\t\t\tconst pathname = href.replace(window.location.origin, '')\n\n\t\t\tif (!preventClick(e, elm)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tif (pathname === window.location.href.replace(window.location.origin, ''))\n\t\t\t\treturn\n\n\t\t\te.preventDefault()\n\n\t\t\tconst dataAttrs = composeProps([...elm.attributes])\n\n\t\t\tlazyload.cancel()\n\t\t\tthis.goTo({ pathname, dataAttrs, action: 'PUSH' })\n\t\t}\n\n\t\t/** *\n\t\t * @method mount\n\t\t * @memberof Router\n\t\t * @description Called after instantiation, boots everything up\n\t\t *\n\t\t * @return {Router}\n\t\t */\n\t\tmount = () => {\n\t\t\teventBus.on(Action.ROUTER_POP_EVENT, ({ pathname }) => {\n\t\t\t\tthis.lifecycle.init({ pathname, action: 'POP' })\n\t\t\t})\n\n\t\t\teventBus.on(\n\t\t\t\tAction.ROUTE_TRANSITION_AFTER_DOM_UPDATE,\n\t\t\t\t({\n\t\t\t\t\tto: {\n\t\t\t\t\t\tparams: { raw: url }\n\t\t\t\t\t}\n\t\t\t\t}) => {\n\t\t\t\t\tthis.$links(url)\n\t\t\t\t}\n\t\t\t)\n\n\t\t\tlocalLinks(document)\n\n\t\t\tthis.$events.attachAll()\n\n\t\t\treturn this\n\t\t}\n\n\t\t/** *\n\t\t * @method lazyload\n\t\t * @memberof Router\n\t\t * @description prefetch content on a service worker\n\t\t *\n\t\t * @return {Router}\n\t\t */\n\t\tlazyload = () => {\n\t\t\tconst items = [...document.querySelectorAll(this.prefetchTargets)]\n\t\t\tlazyload.fetch(items)\n\t\t\treturn this\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import loader from '@/core/modules/loader'\nimport Ui from '@/core/UiLoader'\nimport eventBus from '@/core/modules/eventBus'\nimport Router from '@/core/router/'\nimport * as Actions from '@/core/router/actions'\n\nexport default (() =>\n\tclass App {\n\t\tconstructor({ router, chunks }) {\n\t\t\tif (router && typeof window.fetch === 'function') {\n\t\t\t\tthis.$router = new Router({ ...router })\n\t\t\t}\n\n\t\t\tthis.$loader = loader(chunks)\n\t\t}\n\n\t\tmount = () => {\n\t\t\tthis.$loader.hydrate(document)\n\t\t\tUi.hydrate()\n\n\t\t\tif (!this.$router) return\n\n\t\t\tthis.$router.mount().lazyload()\n\n\t\t\teventBus.on(Actions.ROUTE_TRANSITION_BEFORE_DOM_UPDATE, () => {\n\t\t\t\tUi.destroy()\n\t\t\t\tthis.$loader.unmount()\n\t\t\t})\n\n\t\t\teventBus.on(Actions.ROUTE_TRANSITION_AFTER_DOM_UPDATE, ({ newHtml }) => {\n\t\t\t\tthis.$loader.hydrate(newHtml)\n\n\t\t\t\tUi.hydrate(newHtml)\n\n\t\t\t\tif (window.requestIdleCallback) {\n\t\t\t\t\twindow.requestIdleCallback(() => {\n\t\t\t\t\t\tthis.$router.lazyload()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n"],"sourceRoot":""}